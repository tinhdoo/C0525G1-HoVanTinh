<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Demo Mobile Messaging</title>
</head>
<body>
<script>

  class Mobile {
    constructor(pin) {
      this.pin = pin;
      this.inbox = [];
      this.sent = [];
      this.isOn = true;
    }

    turnOff() {
      this.isOn = false;
    }

    turnOn() {
      this.isOn = true;
    }

    usePin() {
      if (this.pin > 0) this.pin--;
      else {
        console.log("H·∫øt pin, ƒëi·ªán tho·∫°i t·∫Øt");
        this.turnOff();
      }
    }

    getStatus() {
      return this.isOn ? "B·∫≠t" : "T·∫Øt";
    }

    receiveMessage(msg) {
      if (!this.isOn) return console.log("M√°y t·∫Øt, kh√¥ng nh·∫≠n ƒë∆∞·ª£c tin");
      this.inbox.push(msg);
      this.usePin();
    }
  }
  class GuiTinNhan {
    constructor(phone) {
      this.phone = phone;
    }

    dangSoan(text) {
      this.text = text;

    }

    send(toPhone) {
      if (!this.phone.isOn) return console.log("M√°y g·ª≠i t·∫Øt");
      toPhone.receiveMessage(this.text);
      this.phone.sent.push(this.text);
      this.phone.usePin();
    }

    getPin() {
      return this.phone.pin;
    }
  }

  class SwitchButton {
    constructor(phone) {
      this.phone = phone;
    }

    switchOff() {
      this.phone.turnOff();
    }

    switchOn() {
      this.phone.turnOn();
    }
  }

  let nokia = new Mobile(55);
  let iphone = new Mobile(40)
  let messenger = new GuiTinNhan(nokia);
  let sw = new SwitchButton(nokia);

  console.log("Nokia:", nokia.getStatus(), "Pin:", nokia.pin);
  console.log("Iphone:", iphone.getStatus(), "Pin:", iphone.pin);


  messenger.dangSoan("Hello t·ª´ Nokia üåü");
  messenger.send(iphone);
  console.log("H·ªôp th∆∞ ƒë·∫øn:", iphone.inbox);
  console.log("ƒê√£ g·ª≠i:", nokia.sent);
  console.log("Pin c√≤n:", messenger.getPin());



  sw.switchOff();
  console.log(nokia.getStatus());
  sw.switchOn();
  console.log(nokia.getStatus());
</script>
</body>
</html>
